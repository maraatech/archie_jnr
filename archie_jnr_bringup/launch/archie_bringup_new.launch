<?xml version="1.0" ?>
<launch>
	<!-- Default namespace topics: DO NOT EDIT -->
	<arg name="ns_a" value="a"/>
	<arg name="tf_prefix_a" default="$(arg ns_a)"/>

	<arg name="ns_b" value="b"/>
	<arg name="tf_prefix_b" default="$(arg ns_b)"/>

	<arg name="robot_ip_a"           default="192.168.131.9"/>
	<arg name="kinematics_config_a"  default="$(find archie_jnr_description)/config/$(arg tf_prefix_a)/ur5_calibration.yaml"/>
	<arg name="joint_limit_params_a" default="$(find archie_jnr_description)/config/$(arg tf_prefix_a)/joint_limits.yaml"/>

	<arg name="robot_ip_b"           default="192.168.131.8"/>
	<!-- <arg name="kinematics_config_b"  default="$(find archie_jnr_description)/config/$(arg tf_prefix_b)/ur5_calibration.yaml"/> -->
	<arg name="kinematics_config_b"  default="$(find archie_jnr_description)/config/$(arg tf_prefix_b)/ur10_calibration.yaml"/>
	<arg name="joint_limit_params_b" default="$(find archie_jnr_description)/config/$(arg tf_prefix_b)/joint_limits.yaml"/>

	<arg name="debug" default="false" />

	<!-- Load robot description -->
	<include file="$(find archie_jnr_bringup)/launch/load_archie.launch" pass_all_args="true">
  	</include>

  	<!-- Load UR arms -->
  	<group ns="a">
  		<include file="$(find archie_jnr_bringup)/launch/ur5_bringup.launch">
  			<arg name="tf_prefix" 		   value="$(arg tf_prefix_a)/"/>
  			<arg name="robot_ip" 		   value="$(arg robot_ip_a)"/>
			<arg name="reverse_port"       value="50001"/>
			<arg name="script_sender_port" value="50002"/>
			<arg name="kinematics_config"  value="$(arg kinematics_config_a)"/>
			<arg name="joint_limit_params" value="$(arg joint_limit_params_a)"/>

			<arg name="controller_config_file" value="$(find archie_jnr_description)/config/$(arg tf_prefix_a)/ur5_controllers.yaml"/>
  		</include>

  		<!-- <node name="control_node" pkg="ur_moveit_controller" type="control_node.py" output="screen"/> -->
  	</group>

  	<group ns="b">
  		<include file="$(find archie_jnr_bringup)/launch/ur5_bringup.launch">
  			<arg name="tf_prefix" 		   value="$(arg tf_prefix_b)/"/>
  			<arg name="robot_ip" 		   value="$(arg robot_ip_b)"/>
  			<arg name="reverse_port"       value="50003"/>
			<arg name="script_sender_port" value="50004"/>
			<arg name="kinematics_config"  value="$(arg kinematics_config_b)"/>
			<arg name="joint_limit_params" value="$(arg joint_limit_params_b)"/>

			<arg name="controller_config_file" value="$(find archie_jnr_description)/config/$(arg tf_prefix_b)/ur5_controllers.yaml"/>
		</include>

		<!-- <node name="control_node" pkg="ur_moveit_controller" type="control_node.py" output="screen"/> -->
	</group>

	<node name="control_node_a" pkg="ur_moveit_controller" type="control_node.py" output="screen">
		<param name="move_group_name" value="ur_arm_a"/>
	</node>

	<node name="control_node_b" pkg="ur_moveit_controller" type="control_node.py" output="screen">
		<param name="move_group_name" value="ur_arm_b"/>
	</node>

  	<!-- Start joint_state aggregator -->  	
  	<node name="joint_state_publisher" pkg="joint_state_publisher" type="joint_state_publisher">
      <param name="/use_gui" value="false"/>
      <rosparam param="/source_list">[a/joint_states, b/joint_states]</rosparam>
    </node>

    <!-- State publishers -->
	<node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher" respawn="true" output="screen" />

	<!-- Launch moveit -->
	<include file="$(find archie_jnr_moveit_config)/launch/move_group.launch">
		<arg name="debug" default="$(arg debug)" />
		<arg name="publish_monitored_planning_scene" value="true" />
		<arg name="load_robot_description" value="false" />
	</include>
</launch>
